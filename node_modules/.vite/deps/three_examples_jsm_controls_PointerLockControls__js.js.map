{
  "version": 3,
  "sources": ["../../three/examples/jsm/controls/PointerLockControls.js"],
  "sourcesContent": ["import {\r\n\tControls,\r\n\tEuler,\r\n\tVector3\r\n} from 'three';\r\n\r\nconst _euler = new Euler( 0, 0, 0, 'YXZ' );\r\nconst _vector = new Vector3();\r\n\r\n/**\r\n * Fires when the user moves the mouse.\r\n *\r\n * @event PointerLockControls#change\r\n * @type {Object}\r\n */\r\nconst _changeEvent = { type: 'change' };\r\n\r\n/**\r\n * Fires when the pointer lock status is \"locked\" (in other words: the mouse is captured).\r\n *\r\n * @event PointerLockControls#lock\r\n * @type {Object}\r\n */\r\nconst _lockEvent = { type: 'lock' };\r\n\r\n/**\r\n * Fires when the pointer lock status is \"unlocked\" (in other words: the mouse is not captured anymore).\r\n *\r\n * @event PointerLockControls#unlock\r\n * @type {Object}\r\n */\r\nconst _unlockEvent = { type: 'unlock' };\r\n\r\nconst _MOUSE_SENSITIVITY = 0.002;\r\nconst _PI_2 = Math.PI / 2;\r\n\r\n/**\r\n * The implementation of this class is based on the [Pointer Lock API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Pointer_Lock_API}.\r\n * `PointerLockControls` is a perfect choice for first person 3D games.\r\n *\r\n * ```js\r\n * const controls = new PointerLockControls( camera, document.body );\r\n *\r\n * // add event listener to show/hide a UI (e.g. the game's menu)\r\n * controls.addEventListener( 'lock', function () {\r\n *\r\n * \tmenu.style.display = 'none';\r\n *\r\n * } );\r\n *\r\n * controls.addEventListener( 'unlock', function () {\r\n *\r\n * \tmenu.style.display = 'block';\r\n *\r\n * } );\r\n * ```\r\n *\r\n * @augments Controls\r\n * @three_import import { PointerLockControls } from 'three/addons/controls/PointerLockControls.js';\r\n */\r\nclass PointerLockControls extends Controls {\r\n\r\n\t/**\r\n\t * Constructs a new controls instance.\r\n\t *\r\n\t * @param {Camera} camera - The camera that is managed by the controls.\r\n\t * @param {?HTMLDOMElement} domElement - The HTML element used for event listeners.\r\n\t */\r\n\tconstructor( camera, domElement = null ) {\r\n\r\n\t\tsuper( camera, domElement );\r\n\r\n\t\t/**\r\n\t\t * Whether the controls are locked or not.\r\n\t\t *\r\n\t\t * @type {boolean}\r\n\t\t * @readonly\r\n\t\t * @default false\r\n\t\t */\r\n\t\tthis.isLocked = false;\r\n\r\n\t\t/**\r\n\t\t * Camera pitch, lower limit. Range is '[0, Math.PI]' in radians.\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis.minPolarAngle = 0;\r\n\r\n\t\t/**\r\n\t\t * Camera pitch, upper limit. Range is '[0, Math.PI]' in radians.\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @default Math.PI\r\n\t\t */\r\n\t\tthis.maxPolarAngle = Math.PI;\r\n\r\n\t\t/**\r\n\t\t * Multiplier for how much the pointer movement influences the camera rotation.\r\n\t\t *\r\n\t\t * @type {number}\r\n\t\t * @default 1\r\n\t\t */\r\n\t\tthis.pointerSpeed = 1.0;\r\n\r\n\t\t// event listeners\r\n\r\n\t\tthis._onMouseMove = onMouseMove.bind( this );\r\n\t\tthis._onPointerlockChange = onPointerlockChange.bind( this );\r\n\t\tthis._onPointerlockError = onPointerlockError.bind( this );\r\n\r\n\t\tif ( this.domElement !== null ) {\r\n\r\n\t\t\tthis.connect( this.domElement );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconnect( element ) {\r\n\r\n\t\tsuper.connect( element );\r\n\r\n\t\tthis.domElement.ownerDocument.addEventListener( 'mousemove', this._onMouseMove );\r\n\t\tthis.domElement.ownerDocument.addEventListener( 'pointerlockchange', this._onPointerlockChange );\r\n\t\tthis.domElement.ownerDocument.addEventListener( 'pointerlockerror', this._onPointerlockError );\r\n\r\n\t}\r\n\r\n\tdisconnect() {\r\n\r\n\t\tthis.domElement.ownerDocument.removeEventListener( 'mousemove', this._onMouseMove );\r\n\t\tthis.domElement.ownerDocument.removeEventListener( 'pointerlockchange', this._onPointerlockChange );\r\n\t\tthis.domElement.ownerDocument.removeEventListener( 'pointerlockerror', this._onPointerlockError );\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.disconnect();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the look direction of the camera.\r\n\t *\r\n\t * @param {Vector3} v - The target vector that is used to store the method's result.\r\n\t * @return {Vector3} The normalized direction vector.\r\n\t */\r\n\tgetDirection( v ) {\r\n\r\n\t\treturn v.set( 0, 0, - 1 ).applyQuaternion( this.object.quaternion );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Moves the camera forward parallel to the xz-plane. Assumes camera.up is y-up.\r\n\t *\r\n\t * @param {number} distance - The signed distance.\r\n\t */\r\n\tmoveForward( distance ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// move forward parallel to the xz-plane\r\n\t\t// assumes camera.up is y-up\r\n\r\n\t\tconst camera = this.object;\r\n\r\n\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\r\n\r\n\t\t_vector.crossVectors( camera.up, _vector );\r\n\r\n\t\tcamera.position.addScaledVector( _vector, distance );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Moves the camera sidewards parallel to the xz-plane.\r\n\t *\r\n\t * @param {number} distance - The signed distance.\r\n\t */\r\n\tmoveRight( distance ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\tconst camera = this.object;\r\n\r\n\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\r\n\r\n\t\tcamera.position.addScaledVector( _vector, distance );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Activates the pointer lock.\r\n\t *\r\n\t * @param {boolean} [unadjustedMovement=false] - Disables OS-level adjustment for mouse acceleration, and accesses raw mouse input instead.\r\n\t * Setting it to true will disable mouse acceleration.\r\n\t */\r\n\tlock( unadjustedMovement = false ) {\r\n\r\n\t\tthis.domElement.requestPointerLock( {\r\n\t\t\tunadjustedMovement\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Exits the pointer lock.\r\n\t */\r\n\tunlock() {\r\n\r\n\t\tthis.domElement.ownerDocument.exitPointerLock();\r\n\r\n\t}\r\n\r\n}\r\n\r\n// event listeners\r\n\r\nfunction onMouseMove( event ) {\r\n\r\n\tif ( this.enabled === false || this.isLocked === false ) return;\r\n\r\n\tconst camera = this.object;\r\n\t_euler.setFromQuaternion( camera.quaternion );\r\n\r\n\t_euler.y -= event.movementX * _MOUSE_SENSITIVITY * this.pointerSpeed;\r\n\t_euler.x -= event.movementY * _MOUSE_SENSITIVITY * this.pointerSpeed;\r\n\r\n\t_euler.x = Math.max( _PI_2 - this.maxPolarAngle, Math.min( _PI_2 - this.minPolarAngle, _euler.x ) );\r\n\r\n\tcamera.quaternion.setFromEuler( _euler );\r\n\r\n\tthis.dispatchEvent( _changeEvent );\r\n\r\n}\r\n\r\nfunction onPointerlockChange() {\r\n\r\n\tif ( this.domElement.ownerDocument.pointerLockElement === this.domElement ) {\r\n\r\n\t\tthis.dispatchEvent( _lockEvent );\r\n\r\n\t\tthis.isLocked = true;\r\n\r\n\t} else {\r\n\r\n\t\tthis.dispatchEvent( _unlockEvent );\r\n\r\n\t\tthis.isLocked = false;\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction onPointerlockError() {\r\n\r\n\tconsole.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );\r\n\r\n}\r\n\r\nexport { PointerLockControls };\r\n"],
  "mappings": "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",
  "names": []
}
